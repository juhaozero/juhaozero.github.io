<!DOCTYPE HTML><html lang="zh-CN"><head><meta charset="utf-8"><meta name="keywords" content="Redis 入门, juhaozero的博客"><meta name="description" content=""><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=no"><meta name="renderer" content="webkit|ie-stand|ie-comp"><meta name="referrer" content="never"><meta name="mobile-web-app-capable" content="yes"><meta name="format-detection" content="telephone=no"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="black-translucent"><title>Redis 入门 | juhaozero的博客</title><link rel="icon" type="image/png" href="/medias/favicon.png"><link rel="stylesheet" type="text/css" href="/libs/awesome/css/all.css"><link rel="stylesheet" type="text/css" href="https://cdn.bootcss.com/materialize/1.0.0/css/materialize.min.css"><link rel="stylesheet" type="text/css" href="https://cdn.bootcss.com/aos/3.0.0-beta.6/aos.css"><link rel="stylesheet" type="text/css" href="/libs/animate/animate.min.css"><link rel="stylesheet" type="text/css" href="https://cdn.bootcss.com/lightgallery/1.6.12/css/lightgallery.min.css"><link rel="stylesheet" type="text/css" href="/css/matery.css"><link rel="stylesheet" type="text/css" href="/css/my.css"><script src="https://apps.bdimg.com/libs/jquery/2.1.4/jquery.min.js"></script><script src="https://sdk.jinrishici.com/v2/browser/jinrishici.js" charset="utf-8"></script><meta name="generator" content="Hexo 5.4.2"><link rel="alternate" href="/atom.xml" title="juhaozero的博客" type="application/atom+xml"><style>.github-emoji{position:relative;display:inline-block;width:1.2em;min-height:1.2em;overflow:hidden;vertical-align:top;color:transparent}.github-emoji>span{position:relative;z-index:10}.github-emoji .fancybox,.github-emoji img{margin:0!important;padding:0!important;border:none!important;outline:0!important;text-decoration:none!important;user-select:none!important;cursor:auto!important}.github-emoji img{height:1.2em!important;width:1.2em!important;position:absolute!important;left:50%!important;top:50%!important;transform:translate(-50%,-50%)!important;user-select:none!important;cursor:auto!important}.github-emoji-fallback{color:inherit}.github-emoji-fallback img{opacity:0!important}</style></head><body><header class="navbar-fixed"><nav id="headNav" class="bg-color nav-transparent"><div id="navContainer" class="nav-wrapper container"><div class="brand-logo"><a href="/" class="waves-effect waves-light"><img src="/medias/logo.png" class="logo-img" alt="LOGO"> <span class="logo-span">juhaozero的博客</span></a></div><a href="#" data-target="mobile-nav" class="sidenav-trigger button-collapse"><i class="fas fa-bars"></i></a><ul class="right nav-menu"><li class="hide-on-med-and-down nav-item"><a href="/" class="waves-effect waves-light"><i class="fas fa-home" style="zoom:.6"></i> <span>首页</span></a></li><li class="hide-on-med-and-down nav-item"><a href="/tags" class="waves-effect waves-light"><i class="fas fa-tags" style="zoom:.6"></i> <span>标签</span></a></li><li class="hide-on-med-and-down nav-item"><a href="/categories" class="waves-effect waves-light"><i class="fas fa-bookmark" style="zoom:.6"></i> <span>分类</span></a></li><li class="hide-on-med-and-down nav-item"><a href="/archives" class="waves-effect waves-light"><i class="fas fa-archive" style="zoom:.6"></i> <span>归档</span></a></li><li class="hide-on-med-and-down nav-item"><a href="/about" class="waves-effect waves-light"><i class="fas fa-user-circle" style="zoom:.6"></i> <span>关于我</span></a></li><li><a href="#searchModal" class="modal-trigger waves-effect waves-light"><i id="searchIcon" class="fas fa-search" title="搜索" style="zoom:.85"></i></a></li></ul><div id="mobile-nav" class="side-nav sidenav"><div class="mobile-head bg-color"><img src="/medias/logo.png" class="logo-img circle responsive-img"><div class="logo-name">juhaozero的博客</div><div class="logo-desc">Never really desperate, only the lost of the soul.</div></div><ul class="menu-list mobile-menu-list"><li class="m-nav-item"><a href="/" class="waves-effect waves-light"><i class="fa-fw fas fa-home"></i> 首页</a></li><li class="m-nav-item"><a href="/tags" class="waves-effect waves-light"><i class="fa-fw fas fa-tags"></i> 标签</a></li><li class="m-nav-item"><a href="/categories" class="waves-effect waves-light"><i class="fa-fw fas fa-bookmark"></i> 分类</a></li><li class="m-nav-item"><a href="/archives" class="waves-effect waves-light"><i class="fa-fw fas fa-archive"></i> 归档</a></li><li class="m-nav-item"><a href="/about" class="waves-effect waves-light"><i class="fa-fw fas fa-user-circle"></i> 关于我</a></li><li><div class="divider"></div></li><li><a href="https://github.com/juhaozero" class="waves-effect waves-light" target="_blank"><i class="fab fa-github-square fa-fw"></i>Fork Me</a></li></ul></div></div><style>.nav-transparent .github-corner{display:none!important}.github-corner{position:absolute;z-index:10;top:0;right:0;border:0;transform:scale(1.1)}.github-corner svg{color:#0f9d58;fill:#fff;height:64px;width:64px}.github-corner:hover .octo-arm{animation:a .56s ease-in-out}.github-corner .octo-arm{animation:none}@keyframes a{0%,to{transform:rotate(0)}20%,60%{transform:rotate(-25deg)}40%,80%{transform:rotate(10deg)}}</style><a href="https://github.com/juhaozero" class="github-corner tooltipped hide-on-med-and-down" target="_blank" data-tooltip="Fork Me" data-position="left" data-delay="50"><svg viewBox="0 0 250 250" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin:130px 106px" class="octo-arm"></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path></svg></a></nav></header><div class="bg-cover pd-header post-cover" style="background-image:url(/medias/featureimages/12.jpg)"><div class="container" style="right:0;left:0"><div class="row"><div class="col s12 m12 l12"><div class="brand"><h1 class="description center-align post-title">Redis 入门</h1></div></div></div></div></div><main class="post-container content"><link rel="stylesheet" href="/libs/tocbot/tocbot.css"><style>#articleContent h1::before,#articleContent h2::before,#articleContent h3::before,#articleContent h4::before,#articleContent h5::before,#articleContent h6::before{display:block;content:" ";height:100px;margin-top:-100px;visibility:hidden}#articleContent :focus{outline:0}.toc-fixed{position:fixed;top:64px}.toc-widget{width:345px;padding-left:20px}.toc-widget .toc-title{padding:35px 0 15px 17px;font-size:1.5rem;font-weight:700;line-height:1.5rem}.toc-widget ol{padding:0;list-style:none}#toc-content{padding-bottom:30px;overflow:auto}#toc-content ol{padding-left:10px}#toc-content ol li{padding-left:10px}#toc-content .toc-link:hover{color:#42b983;font-weight:700;text-decoration:underline}#toc-content .toc-link::before{background-color:transparent;max-height:25px;position:absolute;right:23.5vw;display:block}#toc-content .is-active-link{color:#42b983}#floating-toc-btn{position:fixed;right:15px;bottom:76px;padding-top:15px;margin-bottom:0;z-index:998}#floating-toc-btn .btn-floating{width:48px;height:48px}#floating-toc-btn .btn-floating i{line-height:48px;font-size:1.4rem}</style><div class="row"><div id="main-content" class="col s12 m12 l9"><div id="artDetail"><div class="card"><div class="card-content article-info"><div class="row tag-cate"><div class="col s7"><div class="article-tag"><a href="/tags/Redis/"><span class="chip bg-color">Redis</span></a></div></div><div class="col s5 right-align"><div class="post-cate"><i class="fas fa-bookmark fa-fw icon-category"></i> <a href="/categories/Redis/" class="post-category">Redis</a></div></div></div><div class="post-info"><div class="post-date info-break-policy"><i class="far fa-calendar-minus fa-fw"></i>发布日期:&nbsp;&nbsp; 2019-06-13</div><div class="info-break-policy"><i class="far fa-file-word fa-fw"></i>文章字数:&nbsp;&nbsp; 2.9k</div></div></div><hr class="clearfix"><link rel="stylesheet" href="/libs/prism/prism.css"><div class="card-content article-card-content"><div id="articleContent"><h2 id="传统DB的缺点"><a href="#传统DB的缺点" class="headerlink" title="传统DB的缺点"></a>传统DB的缺点</h2><p>像Mysql、和Oracle 这种关系型数据库，虽然有着数据稳定和服务稳定、数据一致性的特点，但也存在一个致命的缺陷:</p><h4 id="高并发下DB不稳定"><a href="#高并发下DB不稳定" class="headerlink" title="高并发下DB不稳定"></a>高并发下DB不稳定</h4><p>在高并发的情况下，DB的不稳定性，在大量用户访问时DB出奇的慢，因为对磁盘操作需要使用IO流，一个字节一个字节存取操作。要将所有数据读取到内存中后才可以操作。所以在高并发下DB的<strong>高可用</strong>便成了问题。这时NoSQL便应运而生。</p><h3 id="什么是NOSQl"><a href="#什么是NOSQl" class="headerlink" title="什么是NOSQl"></a>什么是NOSQl</h3><blockquote><p>NoSQL是对不同于传统的关系数据库的数据库管理系统的统称。即非关系型数据库<br>NOSQL：因为是内存操作数据，非常快,解决了三高问题（高并发、高海量、高可用）</p></blockquote><p><strong>非关系型数据库与非关系型数据库的区别</strong></p><table><thead><tr><th>关系型数据库</th><th>非关系型数据库</th></tr></thead><tbody><tr><td>以文件方式保存</td><td>存储在内存中，服务器关闭数据可能会丢失</td></tr><tr><td>数据可以永久保存</td><td>不能持久化保存，可能导致数据丢失</td></tr><tr><td>查询速度慢</td><td>存取速度快</td></tr></tbody></table><p>常见的NOSQL数据库<br><img src="/medias/loading.gif" data-original="https://img-blog.csdnimg.cn/20200107160826641.jpg?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L1NoZXJsb2NraW4=,size_16,color_FFFFFF,t_70" alt="  "></p><h2 id="Redis"><a href="#Redis" class="headerlink" title="Redis"></a>Redis</h2><p><img src="/medias/loading.gif" data-original="https://img-blog.csdnimg.cn/20200107164533556.jpg?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L1NoZXJsb2NraW4=,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br>简单翻译下</p><blockquote><p>Redis是一个开源(BSD许可)的内存数据结构存储，用作数据库、缓存和消息代理。它支持诸如字符串、散列、列表、集、带范围查询的排序集、位图、hyperloglogs、带半径查询和流的地理空间索引等数据结构。Redis具有内置的复制、Lua脚本、LRU清除、事务和不同级别的磁盘持久性，并通过Redis Sentinel和带有Redis集群的自动分区提供高可用性</p></blockquote><p>redis的安装可以到官网下载，这里就不演示了。</p><h4 id="Redis是一种高级的key-value存储系统，其中value支持五种数据类型"><a href="#Redis是一种高级的key-value存储系统，其中value支持五种数据类型" class="headerlink" title="Redis是一种高级的key:value存储系统，其中value支持五种数据类型"></a>Redis是一种高级的<strong>key:value</strong>存储系统，其中value支持五种数据类型</h4><ul><li><p><strong>字符串（strings）</strong></p></li><li><p>字符串无序集合（Set）</p></li><li><p>有序字符串集合（zset）</p></li><li><p>字符串列表（List）</p></li><li><p>-哈希类型（hash）</p></li></ul><h3 id="String类型"><a href="#String类型" class="headerlink" title="String类型"></a>String类型</h3><p>字符串类型是 Redis 中最为基础的数据存储类型，<strong>它在 Redis 中以二进制保存，没有编码和解码的过程</strong>，String字符串类型的Value数据长度512M</p><table><thead><tr><th>操作</th><th>作用</th></tr></thead><tbody><tr><td>set key 值</td><td>添加字符串类型键和值</td></tr><tr><td>get key 值</td><td>取出指定类型的值，没有返回null</td></tr><tr><td>del key</td><td>删除指定的key 返回删除的个数 没有返回0</td></tr><tr><td><img src="/medias/loading.gif" data-original="https://img-blog.csdnimg.cn/20200107165300155.jpg?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L1NoZXJsb2NraW4=,size_16,color_FFFFFF,t_70" alt="  "></td><td></td></tr></tbody></table><h3 id="Set类型"><a href="#Set类型" class="headerlink" title="Set类型"></a>Set类型</h3><p>我们可以将 Set 类型看作为没有排序的字符集合</p><table><thead><tr><th>操作</th><th>作用</th></tr></thead><tbody><tr><td>sadd key 值1、值2</td><td>向集合中添加一个或多个元素</td></tr><tr><td>smembers key</td><td>查询指定集合所有的元素</td></tr><tr><td>sismember key 值</td><td>查询某个值是否存在 存在返回1、反则</td></tr><tr><td>srem key 值1、值2</td><td>删除指定元素</td></tr></tbody></table><p><img src="/medias/loading.gif" data-original="https://img-blog.csdnimg.cn/20200107170803104.jpg?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L1NoZXJsb2NraW4=,size_16,color_FFFFFF,t_70" alt="  "></p><h3 id="Zset类型"><a href="#Zset类型" class="headerlink" title="Zset类型"></a>Zset类型</h3><p>集合一样也是string类型元素的集合,且不允许重复的成员。<br><strong>不同的是每个元素都会关联一个分数。redis正是通过分数来为集合中的成员进行从小到大的排序</strong>。有序集合的成员是唯一的,但分数(score)却可以重复，每个集合可存储40多亿个成员</p><table><thead><tr><th>操作</th><th>作用</th></tr></thead><tbody><tr><td>zadd key 分数 值</td><td>向集合 添加一个或多个元素</td></tr><tr><td>zrang key 开始 结束</td><td>返回集合中指定区间内的元素</td></tr><tr><td>zrem key 值</td><td>删除集合的 一个元素或多个元素</td></tr><tr><td>zcard key</td><td>获取集合中的元素数</td></tr><tr><td>zrank key 值</td><td>返回集合中指定成员的索引</td></tr></tbody></table><p><img src="/medias/loading.gif" data-original="https://img-blog.csdnimg.cn/20200107174332626.jpg?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L1NoZXJsb2NraW4=,size_16,color_FFFFFF,t_70" alt="  "></p><h2 id="list类型"><a href="#list类型" class="headerlink" title="list类型"></a>list类型</h2><p>List 类型是按照插入顺序排序的字符串链表。和数据结构中的普通链表一样，我们可以在其左部(left)和右部(right)添加新的元素。</p><table><thead><tr><th>操作</th><th>作用</th></tr></thead><tbody><tr><td>lpush key 元素1 元素2</td><td>往链表左边添加元素 键不存在则 创建新链表</td></tr><tr><td>rpush key 元素1 元素2</td><td>往链表右边添加元素 键不存在则 创建新链表</td></tr><tr><td>lrange key 开始 结束</td><td>取出指定范围的元素列表 左边数第一个为0 右边数第一个为-1</td></tr><tr><td>lpop key</td><td>从左边删除一个元素</td></tr><tr><td>rpop key</td><td>从右边删除一个元素</td></tr><tr><td>llen key</td><td>得到指定链表的长度</td></tr><tr><td><img src="/medias/loading.gif" data-original="https://img-blog.csdnimg.cn/20200109160119551.jpg" alt="  "></td><td></td></tr><tr><td><img src="/medias/loading.gif" data-original="https://img-blog.csdnimg.cn/20200109160135742.jpg" alt="  "></td><td></td></tr></tbody></table><h2 id="Hash类型"><a href="#Hash类型" class="headerlink" title="Hash类型"></a>Hash类型</h2><p>Redis 中的 Hash 类型可以看成具 String 的键和 String 的值 Map 容器，每一个 Hash 可以存储 40（42 亿 9千多个）亿个键值对。</p><table><thead><tr><th>操作</th><th>作用</th></tr></thead><tbody><tr><td>hset key MapKey 值</td><td>向指定的key中添加 hasnMap类型</td></tr><tr><td>hget key MapKey</td><td>获取指定key中的指定HashMap</td></tr><tr><td>hmset key MapKey1 值 MapKey2 值</td><td>向一个键中设置多个Map和值</td></tr><tr><td>hmget key MapKey1 MapKey2</td><td>获取一个键中的多个Map</td></tr><tr><td>hdel key MapKey1 MapKey1</td><td>删除一个键中的多个Map</td></tr><tr><td>hgetall key</td><td>得到一个键中的所有Map</td></tr><tr><td><img src="/medias/loading.gif" data-original="https://img-blog.csdnimg.cn/20200109163249198.jpg?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L1NoZXJsb2NraW4=,size_16,color_FFFFFF,t_70" alt="  "></td><td></td></tr><tr><td>批量插入Map</td><td></td></tr><tr><td><img src="/medias/loading.gif" data-original="https://img-blog.csdnimg.cn/20200109163307979.jpg" alt="  "></td><td></td></tr><tr><td>删除Map</td><td></td></tr><tr><td><img src="/medias/loading.gif" data-original="https://img-blog.csdnimg.cn/2020010916333456.jpg?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L1NoZXJsb2NraW4=,size_16,color_FFFFFF,t_70" alt="  "></td><td></td></tr></tbody></table><h2 id="其他操作命令"><a href="#其他操作命令" class="headerlink" title="其他操作命令"></a>其他操作命令</h2><table><thead><tr><th>操作</th><th>作用</th></tr></thead><tbody><tr><td>keys 匹配字符</td><td>查询数据库的键 （ * 为匹配全部字符）</td></tr><tr><td>del key1 key2</td><td>删除任意键</td></tr><tr><td>exists key</td><td>判断指定键是否存在</td></tr><tr><td>type key</td><td>判断该key 属于哪种类型</td></tr><tr><td>select 数据库编号</td><td>选择指定的数据库</td></tr><tr><td>move key 数据库编号</td><td>将某个键移动到另一个数据库</td></tr><tr><td>Expire key 秒</td><td>设置过期时间</td></tr><tr><td>TTL key</td><td>返回剩余生存时间</td></tr><tr><td><img src="/medias/loading.gif" data-original="https://img-blog.csdnimg.cn/2020010917015779.jpg?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L1NoZXJsb2NraW4=,size_16,color_FFFFFF,t_70" alt="   "></td><td></td></tr></tbody></table><p>Redis数据库，Redis默认有16个数据库，我们可以通过Redis的一个图形化工具查看<br><img src="/medias/loading.gif" data-original="https://img-blog.csdnimg.cn/20200109170353435.jpg" alt=" "><br><img src="/medias/loading.gif" data-original="https://img-blog.csdnimg.cn/20200109171834997.jpg?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L1NoZXJsb2NraW4=,size_16,color_FFFFFF,t_70" alt="  "><img src="/medias/loading.gif" data-original="https://img-blog.csdnimg.cn/2020010917220188.jpg" alt="  "><br><img src="/medias/loading.gif" data-original="https://img-blog.csdnimg.cn/20200109172228496.jpg" alt="  "></p><h4 id="设置过期时间（过期时为-2）"><a href="#设置过期时间（过期时为-2）" class="headerlink" title="设置过期时间（过期时为-2）"></a>设置过期时间（过期时为-2）</h4><p><img src="/medias/loading.gif" data-original="https://img-blog.csdnimg.cn/20200109174955819.jpg?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L1NoZXJsb2NraW4=,size_16,color_FFFFFF,t_70" alt="   "></p><h2 id="Redis持久化"><a href="#Redis持久化" class="headerlink" title="Redis持久化"></a>Redis持久化</h2><p>Redis的最大特色就是<strong>持久化机制</strong>，当发生服务器宕机等不可预料因素时，Redis会将符合条件的数据进行持久化，在重启时恢复数据。RDB 和 AOF 是 Redis 内部的两种数据持久化策略，这是两种不同的持久化策略，<strong>一种是基于内存快照，一种是基于操作日志</strong></p><h3 id="RDB持久化策略（基于内存快照）"><a href="#RDB持久化策略（基于内存快照）" class="headerlink" title="RDB持久化策略（基于内存快照）"></a>RDB持久化策略（基于内存快照）</h3><blockquote><p>RDB(Redis DataBase)持久化策略就是在符合一定条件下将内存所有数据持久化到磁盘中dump.rdb文件中。RDB策略是redis默认持久化策略。也叫快照策略。</p></blockquote><p>什么是快照策略，RDB持久化是指在某一段时间内将该内存下所有的数据存储为文件，当服务器丢失时，自动恢复到最新的一份RDB文件，简单点说就是相当于每隔一段时间就将Redis的文件<br>做一次备份，<strong>当然要满足一定的要求</strong> RDB持久化是Redis默认的持久化机制</p><p>在安装完Redis的目录下有个config文件<br><img src="/medias/loading.gif" data-original="https://img-blog.csdnimg.cn/20200109192335792.jpg" alt="  "><br>在该文件下我们可以找到这样一段话<br><img src="/medias/loading.gif" data-original="https://img-blog.csdnimg.cn/20200109192413876.jpg?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L1NoZXJsb2NraW4=,size_16,color_FFFFFF,t_70" alt="  "><br>简单翻译一下就是</p><blockquote><p>将DB保存到磁盘上:<br>在下面的例子中行为将保存DB<br>900秒后(15分钟)如果至少1键改变了<br>300秒(5分钟)如果至少10键改变<br>60秒后如果至少10000键改变</p><p>也就是说：<br><strong>当数据在15分钟内改变了一个key，就会执行持久化机制<br>如果数据在5分钟内有10个key改变，就会执行持久化机制<br>如果数据在1分钟内有10000key改变，就会执行持久化机制</strong></p></blockquote><p>而我们持久化完的数据在哪里显示呢？<br>在该文件下面也有进行说明<br><img src="/medias/loading.gif" data-original="https://img-blog.csdnimg.cn/20200109193309603.jpg?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L1NoZXJsb2NraW4=,size_16,color_FFFFFF,t_70" alt="  "><br>简单翻译下</p><blockquote><p>要将数据库转储到何处的文件名</p><p>于是我们就可以在Redis的安装目录下找到这个文件<br><img src="/medias/loading.gif" data-original="https://img-blog.csdnimg.cn/20200109193539993.jpg" alt="  "></p></blockquote><h3 id="关于RDB持久化机制"><a href="#关于RDB持久化机制" class="headerlink" title="关于RDB持久化机制"></a>关于RDB持久化机制</h3><p>RDB的持久化机制，我们可以在配置文件中修改持久化时间，但一般不建议修改，因为在Redis达到一定数据量时，频繁的进行RDB的持久化机制便是一个非常浪费性能的事。RDB的持久机制<br>不高，便意味可能RDB持久化会导致丢失一定的数据。以快的持久化时间来说，相当于我们还是有60秒的空档期。而这可以靠另一个持久化机制来解决。</p><h3 id="AOF持久化策略（基于操作日志）"><a href="#AOF持久化策略（基于操作日志）" class="headerlink" title="AOF持久化策略（基于操作日志）"></a>AOF持久化策略（基于操作日志）</h3><blockquote><p>AOF(append only file)策略，是基于操作日志实现的<br>它的特点持久化的频率非常高了，默认每秒持久化1次。每一秒内将最新的<font color="red"><strong>写入与删除</strong></font>的命令进行持久化。</p></blockquote><p>AOF的持久化机制和RDB的持久化机制完全不同，AOF是基于日志文件操作的，简单点说就是RDB会将数据进行备份，而<font color="red"><strong>AOF备份的是操作</strong></font> , 就是说，AOF将你所有的<strong>写入和删除</strong>操作进行备份，当服务器宕机时，可以通过备份的操作还原数据。</p><p>在配置文件中有这么一小段<br><img src="/medias/loading.gif" data-original="https://img-blog.csdnimg.cn/20200109200757357.jpg"><br>简单翻译下</p><blockquote><p>可以同时启用AOF和RDB持久性，没有问题。如果在启动时启用了AOF，那么Redis将加载AOF，即具有更好持久性保证的文件</p></blockquote><h6 id="开启AOF机制"><a href="#开启AOF机制" class="headerlink" title="开启AOF机制"></a>开启AOF机制</h6><p><img src="/medias/loading.gif" data-original="https://img-blog.csdnimg.cn/20200109200859573.jpg" alt="  "></p><h5 id="AOF持久化选择"><a href="#AOF持久化选择" class="headerlink" title="AOF持久化选择"></a>AOF持久化选择</h5><p><img src="/medias/loading.gif" data-original="https://img-blog.csdnimg.cn/20200109201312398.jpg?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L1NoZXJsb2NraW4=,size_16,color_FFFFFF,t_70" alt=" "><br>简单翻译下</p><blockquote><p>默认设置是“每隔一秒”，因为这通常是正确的折衷<br>速度和数据安全。这取决于你是否能慢下来<br>“no”将允许操作系统在何时刷新输出缓冲区<br>为了更好的表现(但是如果你能接受一些数据丢失更多考虑的是快照的默认RDB持久性模式)，或者相反，使用“always”，虽然很慢，但是更安全。</p></blockquote><p>这里指的是AOF提供持久化的频率<br><img src="/medias/loading.gif" data-original="https://img-blog.csdnimg.cn/20200109201559103.jpg" alt="在这里插入图片描述"><br>always：指每次修改都进行持久化操作，效率是最低的，但也是最安全的。<br>everysec：指每秒持久化一次，默认使用<br>no：指的是不进行持久化，效率最高</p><h5 id="AOF的重写机制"><a href="#AOF的重写机制" class="headerlink" title="AOF的重写机制"></a>AOF的重写机制</h5><p>当AOF开启时每秒的操作都会进行持久化，这样会导致日志文件的过大<br>于是AOF就有了重写机制，同样在配置文件下<br><img src="/medias/loading.gif" data-original="https://img-blog.csdnimg.cn/20200109203646265.jpg?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L1NoZXJsb2NraW4=,size_16,color_FFFFFF,t_70" alt="  "></p><p>简单翻译下</p><blockquote><p>这个基本大小与当前大小进行比较。如果当前大小大于指定的百分比，将触发重写。您需要为要重写的AOF文件指定一个最小的大小</p></blockquote><p><strong>默认当日志文件大小超过内存数据100%时触发重写<br>当日志文件达到64M时也触发重写</strong></p><h3 id="关于AOF持久化机制"><a href="#关于AOF持久化机制" class="headerlink" title="关于AOF持久化机制"></a>关于AOF持久化机制</h3><p>AOF策略的优点是显而易见的， 每秒持久化，具有更高的数据安全，如果服务器崩溃只会丢1秒内的数据，但缺点也是一样明显：由于持久化频率高，Redis的性能会变低。</p><p>值得注意的是AOF和RDB同时开启，默认使用AOF恢复数据，<br>因为AOF是秒级以内的容错。</p><h4 id="关于两者的选用"><a href="#关于两者的选用" class="headerlink" title="关于两者的选用"></a>关于两者的选用</h4><h5 id="官方建议"><a href="#官方建议" class="headerlink" title="官方建议"></a>官方建议</h5><blockquote><p>通常，如果你要想提供很高的数据保障性，那么建议你同时使用两种持久化方式。<br>如果你可以接受灾难带来的几分钟的数据丢失，那么你可以仅使用RDB。很多用户仅使用了AOF，但是我们建议，既然RDB可以时不时的给数据做个完整的快照，并且提供更快的重启，所以最好还是也使用RDB。<br>因此，我们希望可以在未来（长远计划）统一AOF和RDB成一种持久化模式。</p></blockquote><h3 id="最后"><a href="#最后" class="headerlink" title="最后"></a>最后</h3><p>关于Redis就讲到这里了<br>有空再更！！！！<br>个人博客：<a href="https://juhaozero.github.io/">juhaozero的博客</a><br><img src="/medias/loading.gif" data-original="https://img-blog.csdnimg.cn/2020010920475983.jpg?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L1NoZXJsb2NraW4=,size_16,color_FFFFFF,t_70" alt="    "></p></div><hr><div class="reprint" id="reprint-statement"><div class="reprint__author"><span class="reprint-meta" style="font-weight:700"><i class="fas fa-user">文章作者: </i></span><span class="reprint-info"><a href="/about" rel="external nofollow noreferrer">juhaozero</a></span></div><div class="reprint__type"><span class="reprint-meta" style="font-weight:700"><i class="fas fa-link">文章链接: </i></span><span class="reprint-info"><a href="https://juhaozero.github.io/posts/4abc8450.html">https://juhaozero.github.io/posts/4abc8450.html</a></span></div><div class="reprint__notice"><span class="reprint-meta" style="font-weight:700"><i class="fas fa-copyright">版权声明: </i></span><span class="reprint-info">本博客所有文章除特別声明外，均采用 <a href="https://creativecommons.org/licenses/by/4.0/deed.zh" rel="external nofollow noreferrer" target="_blank">CC BY 4.0</a> 许可协议。转载请注明来源 <a href="/about" target="_blank">juhaozero</a> !</span></div></div><script async defer>function navToReprintStatement(){$("html, body").animate({scrollTop:$("#reprint-statement").offset().top-80},800)}document.addEventListener("copy",function(t){M.toast({html:'<span>复制成功，请遵循本文的转载规则</span><button class="btn-flat toast-action" onclick="navToReprintStatement()" style="font-size: smaller">查看</a>'})})</script><div class="tag_share" style="display:block"><div class="post-meta__tag-list" style="display:inline-block"><div class="article-tag"><a href="/tags/Redis/"><span class="chip bg-color">Redis</span></a></div></div><div class="post_share" style="zoom:80%;width:fit-content;display:inline-block;float:right;margin:-.15rem 0"><link rel="stylesheet" type="text/css" href="/libs/share/css/share.min.css"><div id="article-share"></div></div></div></div></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/gitalk/dist/gitalk.css"><link rel="stylesheet" href="/css/my-gitalk.css"><div class="card gitalk-card" data-aos="fade-up"><div class="comment_headling" style="font-size:20px;font-weight:700;position:relative;padding-left:20px;top:15px;padding-bottom:5px"><i class="fas fa-comments fa-fw" aria-hidden="true"></i> <span>评论</span></div><div id="gitalk-container" class="card-content"></div></div><script src="https://cdn.jsdelivr.net/npm/gitalk/dist/gitalk.min.js"></script><script>let gitalk=new Gitalk({clientID:"736ff0a6e49d2f9bb2ee",clientSecret:"3e2997df5da9ff995b6f0354a0e6d783cf579801",repo:"juhaozero.github.io",owner:"juhaozero",admin:["juhaozero"],id:"2019-06-13T08-14-20",distractionFreeMode:!1});gitalk.render("gitalk-container")</script><article id="prenext-posts" class="prev-next articles"><div class="row article-row"><div class="article col s12 m6" data-aos="fade-up"><div class="article-badge left-badge text-color"><i class="fas fa-chevron-left"></i>&nbsp;上一篇</div><div class="card"><a href="/posts/bae9a0d2.html"><div class="card-image"><img src="/medias/featureimages/17.jpg" class="responsive-img" alt="RabbitMQ入门"> <span class="card-title">RabbitMQ入门</span></div></a><div class="card-content article-content"><div class="summary block-with-text"></div><div class="publish-info"><span class="publish-date"><i class="far fa-clock fa-fw icon-date"></i>2019-12-29 </span><span class="publish-author"><i class="fas fa-bookmark fa-fw icon-category"></i> <a href="/categories/%E6%B6%88%E6%81%AF%E9%98%9F%E5%88%97/" class="post-category">消息队列</a></span></div></div><div class="card-action article-tags"><a href="/tags/Mq/"><span class="chip bg-color">Mq</span></a></div></div></div><div class="article col s12 m6" data-aos="fade-up"><div class="article-badge right-badge text-color">本篇&nbsp;<i class="far fa-dot-circle"></i></div><div class="card"><a href="/posts/4abc8450.html"><div class="card-image"><img src="/medias/featureimages/12.jpg" class="responsive-img" alt="Redis 入门"> <span class="card-title">Redis 入门</span></div></a><div class="card-content article-content"><div class="summary block-with-text"></div><div class="publish-info"><span class="publish-date"><i class="far fa-clock fa-fw icon-date"></i>2019-06-13 </span><span class="publish-author"><i class="fas fa-bookmark fa-fw icon-category"></i> <a href="/categories/Redis/" class="post-category">Redis</a></span></div></div><div class="card-action article-tags"><a href="/tags/Redis/"><span class="chip bg-color">Redis</span></a></div></div></div></div></article></div><script type="text/javascript" src="/libs/codeBlock/codeBlockFuction.js"></script><script type="text/javascript" src="/libs/codeBlock/codeLang.js"></script><script type="text/javascript" src="/libs/codeBlock/codeCopy.js"></script><script type="text/javascript" src="/libs/codeBlock/codeShrink.js"></script></div><div id="toc-aside" class="expanded col l3 hide-on-med-and-down"><div class="toc-widget card" style="background-color:#fff;overflow-y:scroll;height:400px"><div class="toc-title"><i class="far fa-list-alt"></i>&nbsp;&nbsp;目录</div><div id="toc-content"></div></div></div></div><div id="floating-toc-btn" class="hide-on-med-and-down"><a class="btn-floating btn-large bg-color"><i class="fas fa-list-ul"></i></a></div><script src="/libs/tocbot/tocbot.min.js"></script><script>$(function(){tocbot.init({tocSelector:"#toc-content",contentSelector:"#articleContent",headingsOffset:-(.4*$(window).height()-45),collapseDepth:Number("0"),headingSelector:"h1, h2, h3, h4, h5"});let t=0,e="toc-heading-";$("#toc-content a").each(function(){$(this).attr("href","#"+e+ ++t)}),t=0,$("#articleContent").children("h1, h2, h3, h4, h5").each(function(){$(this).attr("id",e+ ++t)});let n=parseInt(.4*$(window).height()-64),o=$(".toc-widget");$(window).scroll(function(){$(window).scrollTop()>n?o.addClass("toc-fixed"):o.removeClass("toc-fixed")});const i="expanded";let c=$("#toc-aside"),l=$("#main-content");$("#floating-toc-btn .btn-floating").click(function(){c.hasClass(i)?(c.removeClass(i).hide(),l.removeClass("l9")):(c.addClass(i).show(),l.addClass("l9")),function(t,e){let n=$("#"+t);if(0!==n.length){let t=n.width();450<=t?t+=21:350<=t&&t<450?t+=18:300<=t&&t<350?t+=16:t+=14,$("#"+e).width(t)}}("artDetail","prenext-posts")})})</script></main><footer class="page-footer bg-color"><div class="container row center-align" style="margin-bottom:0!important"><div class="col s12 m8 l8 copy-right">Copyright&nbsp;&copy; <span id="year">2020-2023</span> <a href="/about" target="_blank">juhaozero</a> |&nbsp;<span style="margin:0 5px;display:inline-block"><i class="fa fa-heart" style="color:#ff71a8"></i></span> Powered by <a href="/about" target="_blank">juhaozero</a><br>&nbsp;<i class="fas fa-chart-area"></i>&nbsp;站点总字数:&nbsp;<span class="white-color">12.7k</span>&nbsp;字<br><br></div><div class="col s12 m4 l4 social-link"><a href="https://github.com/juhaozero" class="tooltipped" target="_blank" data-tooltip="访问我的GitHub" data-position="top" data-delay="50"><i class="fab fa-github"></i> </a><a href="mailto:602994954@qq.com" class="tooltipped" target="_blank" data-tooltip="邮件联系我" data-position="top" data-delay="50"><i class="fas fa-envelope-open"></i> </a><a href="tencent://AddContact/?fromId=50&fromSubId=1&subcmd=all&uin=602994954" class="tooltipped" target="_blank" data-tooltip="QQ联系我: 602994954" data-position="top" data-delay="50"><i class="fab fa-qq"></i> </a><a href="/atom.xml" class="tooltipped" target="_blank" data-tooltip="RSS 订阅" data-position="top" data-delay="50"><i class="fas fa-rss"></i></a></div></div></footer><div class="progress-bar"></div><div id="searchModal" class="modal"><div class="modal-content"><div class="search-header"><span class="title"><i class="fas fa-search"></i>&nbsp;&nbsp;搜索</span> <input type="search" id="searchInput" name="s" placeholder="请输入搜索的关键字" class="search-input"></div><div id="searchResult"></div></div></div><script type="text/javascript">$(function(){!function(t,r,s){"use strict";$.ajax({url:t,dataType:"xml",success:function(t){var e=$("entry",t).map(function(){return{title:$("title",this).text(),content:$("content",this).text(),url:$("url",this).text()}}).get(),t=document.getElementById(r),n=document.getElementById(s);t.addEventListener("input",function(){var o='<ul class="search-result-list">',h=this.value.trim().toLowerCase().split(/[\s\-]+/);n.innerHTML="",this.value.trim().length<=0||(e.forEach(function(t){var n,e,r,s=!0,i=t.title.trim().toLowerCase(),l=t.content.trim().replace(/<[^>]+>/g,"").toLowerCase(),a=0===(a=t.url).indexOf("/")?t.url:"/"+a,c=-1,u=-1;""!==i&&""!==l&&h.forEach(function(t,e){n=i.indexOf(t),c=l.indexOf(t),n<0&&c<0?s=!1:(c<0&&(c=0),0===e&&(u=c))}),s&&(o+="<li><a href='"+a+"' class='search-result-title'>"+i+"</a>",e=t.content.trim().replace(/<[^>]+>/g,""),0<=u&&(a=u+80,(a=0===(t=(t=u-20)<0?0:t)?100:a)>e.length&&(a=e.length),r=e.substr(t,a),h.forEach(function(t){var e=new RegExp(t,"gi");r=r.replace(e,'<em class="search-keyword">'+t+"</em>")}),o+='<p class="search-result">'+r+"...</p>"),o+="</li>")}),o+="</ul>",n.innerHTML=o)})}})}("/search.xml","searchInput","searchResult")})</script><div id="backTop" class="top-scroll"><a class="btn-floating btn-large waves-effect waves-light" href="#!"><i class="fas fa-arrow-up"></i></a></div><script src="https://cdn.bootcss.com/materialize/1.0.0/js/materialize.min.js"></script><script src="https://cdn.bootcss.com/masonry/4.2.2/masonry.pkgd.min.js"></script><script src="https://cdn.bootcss.com/aos/3.0.0-beta.6/aos.js"></script><script src="https://cdn.bootcss.com/scrollprogress/3.0.2/scrollProgress.min.js"></script><script src="https://cdn.bootcss.com/lightgallery/1.6.12/js/lightgallery-all.min.js"></script><script src="/js/matery.js"></script><script>!function(){var t=document.createElement("script"),e=window.location.protocol.split(":")[0];t.src="https"===e?"https://zz.bdstatic.com/linksubmit/push.js":"http://push.zhanzhang.baidu.com/push.js";e=document.getElementsByTagName("script")[0];e.parentNode.insertBefore(t,e)}()</script><script src="/libs/others/clicklove.js" async></script><script src="/libs/instantpage/instantpage.js" type="module"></script><script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({pluginModelPath:"assets/",model:{jsonPath:"/live2dw/assets/wanko.model.json"},display:{position:"left",width:300,height:250},mobile:{show:!1},rect:"opacity:0.7",log:!1,pluginJsPath:"lib/",pluginRootPath:"live2dw/",tagMode:!1})</script><script>window.imageLazyLoadSetting={isSPA:!1,preloadRatio:1,processImages:null}</script><script>window.addEventListener("load",function(){var t=/\.(gif|jpg|jpeg|tiff|png)$/i,r=/^data:image\/[a-z]+;base64,/;Array.prototype.slice.call(document.querySelectorAll("img[data-original]")).forEach(function(a){var e=a.parentNode;"A"===e.tagName&&(e.href.match(t)||e.href.match(r))&&(e.href=a.dataset.original)})})</script><script>!function(n){n.imageLazyLoadSetting.processImages=o;var e=n.imageLazyLoadSetting.isSPA,i=n.imageLazyLoadSetting.preloadRatio||1,r=Array.prototype.slice.call(document.querySelectorAll("img[data-original]"));function o(){e&&(r=Array.prototype.slice.call(document.querySelectorAll("img[data-original]")));for(var t,a=0;a<r.length;a++)0<=(t=(t=r[a]).getBoundingClientRect()).bottom&&0<=t.left&&t.top<=(n.innerHeight*i||document.documentElement.clientHeight*i)&&function(){var e=r[a],t=e,n=function(){r=r.filter(function(t){return e!==t})},i=new Image,o=t.getAttribute("data-original");i.onload=function(){t.src=o,n()},t.src!==o&&(i.src=o)}()}o(),n.addEventListener("scroll",function(){var t=o,e=n;clearTimeout(t.tId),t.tId=setTimeout(function(){t.call(e)},500)})}(this)</script></body></html>